{{extend './layout.html'}}
{{block 'title'}}<title>jsong,一个不专注的前端程序员</title>{{/block}}
{{block 'content'}}
    <div class="preview">
        <div class="preview_content">
            {{@htmlContent}}
        </div>
        <div class="read-tips">
            <div>上一篇：
                {{if preA._id === ''}}
                    <span style="cursor: pointer;">{{preA.title}}</span>
                {{else}}
                    <a href="/preview?_id={{preA._id}}">{{preA.title}}</a>
                {{/if}}
            </div>
            <div>下一篇：
                {{if nextA._id === ''}}
                    <span style="cursor: pointer;">{{nextA.title}}</span>
                {{else}}
                    <a href="/preview?_id={{nextA._id}}">{{nextA.title}}</a>
                {{/if}}
            </div>
        </div>
        <div class="comment">
            <div>
                <img src="/img/gitHub.jpg" alt="gitHub logo">
                <textarea name="comment" id="comment" class="textarea"></textarea>
                <div class="textarea-wrap">
                    <a><button class="danger-btn gitHub-login">请先登录</button></a>
                </div>
            </div>
            <button class="primary-btn comment-btn">提交</button>
        </div>
    </div>
{{/block}}
{{block 'js'}}
    <script>
        $(() =>{
            //修改标题
            let title = '{{title}}'
            $('title').text(title);
            //目录
            let category = $('.editormd-markdown-toc').html();
            let width = window.innerWidth;

            //平板以上宽度  显示目录结构
            if(width > 1024){
                //存在目录增加目录结构  
                if(category){
                    //设置工具栏的宽度
                    $('.toolBox').css('width', '25%');
                    $('.right .content').css('width', '75%');
                    //在toolBox下显示目录
                    $('.fixedWrap').append(`
                        <div class="artcle-toc markdown-body"></div>
                    `)
                    //显示文章目录
                    $('.artcle-toc').append($('.editormd-markdown-toc').html());
                }
                //隐藏正文的目录
                $('.editormd-markdown-toc').css('display', 'none');
            }

            //使用github账号登陆
            $('.gitHub-login').on('click', function(){
                window.location.href = `https://github.com/login/oauth/authorize?client_id=9b581d4805df0fb0af16&scope=user:email`;
            });
        })
    </script>
{{/block}}